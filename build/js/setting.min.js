+function(a){"use strict";var t=new Vue({el:"#nm-private-list",data:{items:[]},methods:{greet:function(e){var s=a(e.target),i=s.data("id"),n="id="+i+"&action=nm_delete";a.ajax({url:nm_ajax_url.ajax_url,type:"POST",dataType:"json",data:n,success:function(a){if(500==a.status)alert(a.message);else for(var e=0;e<t.items.length;e++)if(t.items[e].id==i)return t.items.splice(e,1)}})}}});a.ajax({url:nm_ajax_url.ajax_url+"?action=nm_get",type:"GET",dataType:"json",success:function(e){var s=[];a.map(e.data,function(a,t){s.push(a)});t.items=s}});var e=a("#nm-form");e.on("submit",function(e){e.preventDefault();var s=a(".nm-form-textInput"),i=s.val(),n=a(".loading-info"),r=a(".nm-form-submit");if(i=i.match(/album\?id=(\d+)/gi),!i.length)return alert("输出正确的地址");var d=i[0].replace(/album\?id=/g,""),u="id="+d+"&action=nm_add";r.attr("disabled",!0),n.removeClass("hide"),a.ajax({url:nm_ajax_url.ajax_url,type:"POST",dataType:"json",data:u,success:function(a){500==a.status?(s.val(""),n.addClass("hide"),r.attr("disabled",!1),alert(a.message)):(t.items.push(a.data),s.val(""),n.addClass("hide"),r.attr("disabled",!1))}})})}(jQuery);